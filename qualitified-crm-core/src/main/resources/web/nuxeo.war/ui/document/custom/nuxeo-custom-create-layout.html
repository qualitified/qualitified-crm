<dom-module id="nuxeo-custom-create-layout">
  <template>
    <style>
      *[role=widget] {
        padding: 5px;
      }
    </style>
    <nuxeo-resource auto on-response="_handleDocTypes" path="config/types/"></nuxeo-resource>

    <label>[[i18n('label.metadata.custom.title')]]</label>
    <nuxeo-selectivity data="[[docTypes]]"
                       min-chars=0
                       placeholder="[[i18n('templateRenderingPage.validDocTypes.placeholder')]]"
                       value="{{document.properties.dc:title}}" ></nuxeo-selectivity>
    <!--add here a dropdown list to select object-->
  </template>

  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'nuxeo-custom-create-layout',
      behaviors: [Nuxeo.LayoutBehavior],
      properties: {

        /**
           * @doctype Custom
           */
        docTypes: Array,

        document: {
          type: Object
        },

      },
         _handleDocTypes: function(e) {
        var docTypes = [{
          id: 'all',
          text: this.i18n('templateRenderingPage.label.document.type.all'),
          displayLabel: this.i18n('templateRenderingPage.label.document.type.all')
        }];
        Object.keys(e.detail.response.doctypes).sort().forEach(function(docType) {
          docTypes.push({
            id: docType,
            text: docType,
            displayLabel: docType
          });
        });
        this.set('docTypes', docTypes);
      }

    });
  })();
  </script>
</dom-module>
