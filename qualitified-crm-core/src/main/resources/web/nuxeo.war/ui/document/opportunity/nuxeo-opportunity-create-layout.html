<link rel="import" href="../qualitified-custom-fields.html">
<link rel="import" href="../../elements/qualitified-document-create.html">

<schema name="person" prefix="person" override="true" src="data/schemas/person.xsd"/>

<dom-module id="nuxeo-opportunity-create-layout">
    <template>
        <style>
      *[role=widget] {
        padding: 5px;
      }
      .container {
        margin: 0;
        padding: 24px 0 0 0;
      }
      @media (min-width: 1024px) {
        nuxeo-dialog {
          min-width: 915px;
        }

       .icon {
       display: inline-flex;

        </style>
        <nuxeo-operation id="createContact" input="/Marketing" op="Document.Create"></nuxeo-operation>

        <nuxeo-input role="widget" value="{{document.properties.dc:title}}"
                     label="[[i18n('label.metadata.opportunity.title')]]" required></nuxeo-input>

        <nuxeo-directory-suggestion role="widget" value="{{document.properties.opportunity:step}}"
                                    label="[[i18n('label.metadata.step')]]" directory-name="OppStep"
                                    min-chars="0" required></nuxeo-directory-suggestion>
        <nuxeo-directory-suggestion
                role="widget"
                value="{{document.properties.opportunity:typeOfIndustry}}"
                label="[[i18n('label.metadata.typeOfIndustry')]]"
                directory-name="Industry"
                min-chars="0">
        </nuxeo-directory-suggestion>
        <nuxeo-directory-suggestion role="widget" value="{{document.properties.opportunity:zone}}"
                                    required="false" label="[[i18n('label.metadata.zone')]]" directory-name="Zone"
                                    min-chars="0"></nuxeo-directory-suggestion>

        <nuxeo-input role="widget" value="{{document.properties.opportunity:amount}}"
                     label="[[i18n('label.metadata.amount')]]" required></nuxeo-input>

        <nuxeo-date-picker value="{{document.properties.opportunity:closeDate}}"
                           label="[[i18n('label.metadata.closedate')]]" role="widget" required></nuxeo-date-picker>

        <nuxeo-user-suggestion value="{{document.properties.opportunity:responsible}}"
                               label="[[i18n('label.metadata.responsible')]]" search-type="USER_TYPE" role="widget"
                               min-chars="0">
        </nuxeo-user-suggestion>

        <qualitified-document-suggestion role="widget" value="{{document.properties.opportunity:mainContact}}" label="[[i18n('label.metadata.mainContact')]]" page-provider="documents" min-chars="0" params='{ "namedParameters": "system_primaryType=Contact"}'></qualitified-document-suggestion>


    </template>
        <qualitified-custom-fields document="{{document}}" mode="edit" ></qualitified-custom-fields>

        <nuxeo-textarea role="widget" value="{{document.properties.dc:description}}"
                        label="[[i18n('label.metadata.description')]]"></nuxeo-textarea>

    </template>

    <script>
  (function() {
    'use strict';
    Polymer({
      is: 'nuxeo-opportunity-create-layout',
      behaviors: [Nuxeo.LayoutBehavior],
      properties: {

        /**
           * @doctype Opportunity
           */
        document: {
          type: Object
        }
        },
        _formatDate: function(date) {
          return moment(date).format('MMMM D, YYYY');
        }


      });
    })();

    </script>
</dom-module>
