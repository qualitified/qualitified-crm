<link href="../copy-to-clipboard-behavior.html" rel="import">
<dom-module id="copy-to-clipboard">
    <template>
        <style>
        </style>
        <paper-toast id="linkToast"></paper-toast>
        <paper-icon-button icon="icons:content-copy" id="copyButtonId"
                           on-tap="_copied"></paper-icon-button>
        <paper-tooltip for="copyButtonId" position="right">
            [[i18n('label.metadata.custom.copy.tooltip')]]
        </paper-tooltip>
    </template>
    <script>
    Polymer({
      is: 'copy-to-clipboard',
      behaviors: [
        Polymer.CopyToClipboardBehavior,Nuxeo.I18nBehavior
      ],
       properties: {
        clipboardValueToCopy: String,
        copyValueIsNotFocused : {
              type: Boolean,
              value: false
        },
        noStyle : {
              type: Boolean,
              value: false
        },
      },
      ready: function () {
          if (!this.noStyle) {
              this.$.copyButtonId.style.color = '#c8c8c8a8';
              this.$.copyButtonId.style.width = '30px';
              this.$.copyButtonId.style.height = '30px';
          }

      },
      attached: function () {
          if (this.$.copyButtonId) this.clipboardSetup(this.$.copyButtonId)
      },
      _copied: function () {
          if (this.copyValueIsNotFocused == true) {
            var textField = document.createElement('textarea');
            textField.innerText = this.clipboardValueToCopy;
            document.body.appendChild(textField);
            textField.select();
            textField.focus(); //SET FOCUS on the TEXTFIELD
          }
            this.$.linkToast.text = this.i18n('label.metadata.custom.copy.toast');
            this.$.linkToast.open();
         }
    })
    </script>
</dom-module>